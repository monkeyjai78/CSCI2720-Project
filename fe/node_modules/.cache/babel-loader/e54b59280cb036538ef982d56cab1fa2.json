{"ast":null,"code":"var _jsxFileName = \"/home/s1155127099/project/fe/src/component/AddModal/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update } from \"../../util/req\";\nimport Button from '../button';\nimport ModalWithTitle from '../ModalWithTitle';\nimport \"./style.css\";\nimport clsx from \"clsx\";\nexport default function AddModal(props) {\n  const gelist = async () => {\n    var res = await _getUserList();\n    setList(res.data);\n  };\n\n  const [list, setList] = useState([]);\n  const [info, setInfo] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const save = async () => {\n    if (infoForm.username.length >= 4 && infoForm.password.length >= 4 && infoForm.username.length <= 20 && infoForm.password.length <= 20) {\n      if (infoForm._id) {\n        var res1 = await _update(infoForm);\n\n        if (res1.code === 500) {\n          alert(\"Username exist\");\n          return;\n        }\n      } else {\n        var res1 = await _reg(infoForm);\n        console.log(res1.code);\n\n        if (res1.code === 500) {\n          alert(\"Username exist\");\n          return;\n        }\n      }\n\n      gelist();\n      alert(\"Updated/Added!\");\n      props.onClickClose();\n      setInfo({\n        username: \"\",\n        password: \"\"\n      });\n    } else {\n      alert(\"Username and password should between 4 and 20 characters\");\n    }\n  };\n\n  const update = async it => {\n    setInfo({ ...it\n    });\n  };\n\n  useEffect(() => {\n    gelist();\n  }, []);\n  const {\n    up = false,\n    infoForm = {},\n    className\n  } = props;\n  return /*#__PURE__*/React.createElement(ModalWithTitle, {\n    englishTitle: up ? \"Update User\" : \"Add New User\",\n    onClick: props.onClickClose,\n    backgroundColor: \"#1F6332\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, \"User Name:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"addmodal-input\",\n    type: \"text\",\n    value: info.username,\n    onChange: e => {\n      setInfoForm({ ...infoForm,\n        username: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, \"Password:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"addmodal-input\",\n    type: \"text\",\n    value: info.password,\n    onChange: e => {\n      setInfoForm({ ...infoForm,\n        password: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    chineseLabel: \"\\u78BA\\u8A8D\",\n    englishLabel: \"Confirm\",\n    onClick: save,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 6\n    }\n  }, info._id ? \"Save\" : \"Create\")))));\n}","map":{"version":3,"sources":["/home/s1155127099/project/fe/src/component/AddModal/index.js"],"names":["React","useEffect","useState","_getUserList","_delUser","_reg","_update","Button","ModalWithTitle","clsx","AddModal","props","gelist","res","setList","data","list","info","setInfo","username","password","save","infoForm","length","_id","res1","code","alert","console","log","onClickClose","update","it","up","className","e","setInfoForm","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update } from \"../../util/req\";\nimport Button from '../button'\nimport ModalWithTitle from '../ModalWithTitle'\nimport \"./style.css\"\nimport clsx from \"clsx\"\n\nexport default function AddModal(props)  {\n\tconst gelist = async () => {\n    var res = await _getUserList();\n    setList(res.data);\n\t};\n\tconst [list, setList] = useState([]);\n\tconst [info, setInfo] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n\tconst save = async () => {\n\t\tif(infoForm.username.length>=4 && infoForm.password.length>=4 && infoForm.username.length<=20 && infoForm.password.length<=20) {\n\t\n\t\t\tif (infoForm._id) {\n\t\t\t\tvar res1 = await _update(infoForm);\n\t\t\t\tif(res1.code===500){\n\t\t\t\t\talert(\"Username exist\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar res1 = await _reg(infoForm);\n\t\t\t\tconsole.log(res1.code);\t\n\t\t\t\tif(res1.code===500){\n\t\t\t\t\talert(\"Username exist\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgelist();\n\t\t\talert(\"Updated/Added!\");\n\t\t\tprops.onClickClose();\n\t\t\tsetInfo({ username: \"\", password: \"\" });\n\t }else {\n\t\t alert(\"Username and password should between 4 and 20 characters\");\n\t}};\n\n\tconst update = async (it) => {\n    setInfo({ ...it });\n  };\n\n\tuseEffect(() => {\n    gelist();\n  }, []);\n\n\tconst { up = false, infoForm={} ,className} = props;\n\n  return(\n    <ModalWithTitle englishTitle={up ? \"Update User\": \"Add New User\"} onClick={props.onClickClose} backgroundColor=\"#1F6332\">\n\t\t<div className=\"addmodal-container\">\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tUser Name:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-input-container\">\n\t\t\t\t<input className=\"addmodal-input\"\n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tvalue={info.username}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetInfoForm({ ...infoForm, username: e.target.value }); \n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tPassword:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input className=\"addmodal-input\" \n\t\t\t\t\t\ttype=\"text\" \n            value={info.password}\n            onChange={(e) => {\n              setInfoForm({ ...infoForm, password: e.target.value });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-button-container\">\n\t\t\t\t<div className=\"addmodal-button\">\n\t\t\t\t\t<Button chineseLabel=\"確認\" englishLabel=\"Confirm\" onClick={save} >\n\t\t\t\t\t\t{info._id ? \"Save\" : \"Create\"}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n      </div>\n\t\t</div>\t\n  \t</ModalWithTitle>\n  )\n\n}\n"]},"metadata":{},"sourceType":"module"}