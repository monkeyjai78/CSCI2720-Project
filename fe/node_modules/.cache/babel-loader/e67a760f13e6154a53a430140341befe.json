{"ast":null,"code":"var _jsxFileName = \"/home/s1155127099/project/fe/src/component/PlaceModal/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update, _addNewPlace } from \"../../util/req\";\nimport Button from '../button';\nimport ModalWithTitle from '../ModalWithTitle';\nimport \"./style.css\";\nimport { _saveJson, _saveReviewsJson, _getPlacesLists, _delPlace, _updatePlace } from \"../../util/req\";\n\nconst PlaceModal = props => {\n  const [list, setList] = useState([]);\n  const [info, setInfo] = useState({\n    name: \"\",\n    rating: \"\",\n    formatted_phone_number: \"\",\n    website: \"\",\n    formatted_address: \"\",\n    lat: \"\",\n    lng: \"\"\n  });\n\n  const gelist = async () => {\n    var res = await _getPlacesLists();\n    setList(res.data);\n  };\n\n  const handleInfo = infoForm => {\n    console.log(infoForm);\n\n    if (infoForm === undefined) {\n      setInfo({ ...infoForm\n      });\n    } else {\n      setInfo({ ...infoForm,\n        lat: infoForm.geometry.location.lat,\n        lng: infoForm.geometry.location.lng\n      });\n    }\n  };\n\n  const save = async () => {\n    if (info._id) {\n      await _updatePlace(info);\n      alert(\"Updated!\");\n    } else {\n      await _addNewPlace(info);\n      alert(\"Added!\");\n    }\n\n    gelist();\n    props.onClickClose();\n    setInfo({\n      name: \"\",\n      rating: \"\",\n      formatted_phone_number: \"\",\n      website: \"\",\n      formatted_address: \"\",\n      lat: \"\",\n      lng: \"\"\n    });\n  };\n\n  const update = async it => {\n    setInfo({ ...it\n    });\n  };\n\n  useEffect(() => {\n    if (infoForm === undefined) {\n      setInfo({ ...infoForm\n      });\n    } else {\n      setInfo({ ...infoForm,\n        lat: infoForm.geometry.location.lat,\n        lng: infoForm.geometry.location.lng\n      });\n    }\n\n    gelist();\n  }, []);\n  const {\n    up = false,\n    infoForm,\n    className\n  } = props;\n  return /*#__PURE__*/React.createElement(ModalWithTitle, {\n    englishTitle: up ? \"Update Place\" : \" Add New Place\",\n    onClick: props.onClickClose,\n    backgroundColor: \"#1F6332\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, \"name:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.name,\n    onChange: e => {\n      setInfo({ ...info,\n        name: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, \"rating:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"addmodal-input\",\n    value: info.rating,\n    min: \"1\",\n    max: \"5\",\n    onChange: e => {\n      setInfo({ ...info,\n        rating: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, \"formatted_phone_number:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.formatted_phone_number,\n    onChange: e => {\n      setInfo({ ...info,\n        formatted_phone_number: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, \"website:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.website,\n    onChange: e => {\n      setInfo({ ...info,\n        website: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  }, \"formatted_address:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.formatted_address,\n    onChange: e => {\n      setInfo({ ...info,\n        formatted_address: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, \"latitude:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.lat,\n    onChange: e => {\n      setInfo({ ...info,\n        lat: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 5\n    }\n  }, \"longitude :\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"addmodal-input\",\n    value: info.lng,\n    onChange: e => {\n      setInfo({ ...info,\n        lng: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    chineseLabel: \"\\u78BA\\u8A8D\",\n    englishLabel: \"Confirm\",\n    onClick: save,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 6\n    }\n  }, info._id ? \"Save\" : \"Create\")))));\n};\n\nexport default PlaceModal;","map":{"version":3,"sources":["/home/s1155127099/project/fe/src/component/PlaceModal/index.js"],"names":["React","useEffect","useState","_getUserList","_delUser","_reg","_update","_addNewPlace","Button","ModalWithTitle","_saveJson","_saveReviewsJson","_getPlacesLists","_delPlace","_updatePlace","PlaceModal","props","list","setList","info","setInfo","name","rating","formatted_phone_number","website","formatted_address","lat","lng","gelist","res","data","handleInfo","infoForm","console","log","undefined","geometry","location","save","_id","alert","onClickClose","update","it","up","className","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update, _addNewPlace } from \"../../util/req\";\nimport Button from '../button';\nimport ModalWithTitle from '../ModalWithTitle';\nimport \"./style.css\";\nimport {\n  _saveJson,\n  _saveReviewsJson,\n  _getPlacesLists,\n  _delPlace,\n  _updatePlace,\n} from \"../../util/req\";\n\nconst PlaceModal = (props) => {\n\tconst [list, setList] = useState([]);\n\tconst [info, setInfo] = useState({\n    name: \"\",\n    rating: \"\",\n    formatted_phone_number: \"\",\n    website: \"\",\n    formatted_address: \"\",\n    lat:\"\",\n    lng:\"\",\n  });\n\tconst gelist = async () => {\n    var res = await _getPlacesLists();\n    setList(res.data);\n  };\n  const handleInfo = (infoForm) =>{\n    console.log(infoForm)\n      if(infoForm===undefined){\n        setInfo({...infoForm})\n      }\n      else{\n        setInfo({...infoForm,lat:infoForm.geometry.location.lat, lng:infoForm.geometry.location.lng})\n      }\n\n\t}\n  const save = async () => {\n\n    if (info._id) {\n      await _updatePlace(info);\n      alert(\"Updated!\");\n    } else {\n      await _addNewPlace(info);\n      alert(\"Added!\");\n    } \n    gelist();\n    props.onClickClose();\n    setInfo({\n      name: \"\",\n      rating: \"\",\n      formatted_phone_number: \"\",\n      website: \"\",\n      formatted_address: \"\",\n      lat:\"\",\n      lng:\"\",\n    });\n    \n\t};\n\n  const update = async (it) => {\n    setInfo({ ...it });\n  };\n\n\tuseEffect(() => {\n    if(infoForm===undefined){\n      setInfo({...infoForm})\n    }\n    else{\n      setInfo({...infoForm,lat:infoForm.geometry.location.lat, lng:infoForm.geometry.location.lng})\n    }\n    gelist();\n  }, []);\n\t\n  const { up = false, infoForm ,className} = props;\n\n  return(\n    <ModalWithTitle englishTitle={up ? \"Update Place\" : \" Add New Place\"} onClick={props.onClickClose} backgroundColor=\"#1F6332\">\n\t\t<div className=\"addmodal-container\">\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tname:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.name}\n            onChange={(e) => {\n              setInfo({ ...info, name: e.target.value });\n            }}\n          />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\trating:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.rating}\n            min = '1'\n            max = '5'\n            onChange={(e) => {\n              setInfo({ ...info, rating: e.target.value });\n            }}\n          />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tformatted_phone_number:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.formatted_phone_number}\n            onChange={(e) => {\n              setInfo({\n                ...info,\n                formatted_phone_number: e.target.value,\n              });\n            }}\n        />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\twebsite:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.website}\n            onChange={(e) => {\n              setInfo({ ...info, website: e.target.value });\n            }}\n        />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tformatted_address:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.formatted_address}\n            onChange={(e) => {\n              setInfo({ ...info, formatted_address: e.target.value });\n            }}\n        />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n          latitude:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.lat}\n            onChange={(e) => {\n              setInfo({ ...info, lat: e.target.value });\n            }}\n        />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n          longitude :{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"addmodal-input\"\n            value={info.lng}\n            onChange={(e) => {\n              setInfo({ ...info, lng: e.target.value });\n            }}\n        />\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-button-container\">\n\t\t\t\t<div className=\"addmodal-button\">\n\t\t\t\t\t<Button chineseLabel=\"確認\" englishLabel=\"Confirm\" onClick={save} >\n\t\t\t\t\t\t{info._id ? \"Save\" : \"Create\"}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n      </div>\n\t\t</div>\t\n  \t</ModalWithTitle>\n  )\n\n}\n\nexport default PlaceModal"]},"metadata":{},"sourceType":"module"}