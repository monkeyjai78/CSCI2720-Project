{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\express-full-4-26\\\\express-full-4-26\\\\fe\\\\src\\\\pages\\\\Hours\\\\index.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Lines from './../../component/Lines';\nimport { _getTenData } from \"../../util/req\";\nimport dayjs from \"dayjs\";\n\nfunction gettimes() {\n  var arr = [];\n\n  for (let index = 0; index < 41; index++) {\n    var hs = dayjs().subtract(15 * index, 'minute').format(\"YYYYMMDD-HHmm\");\n    arr.push(hs);\n  }\n\n  arr = arr.map(it => {\n    var hs = it.slice(0, 11);\n    var cum = it.slice(11, 13);\n    var cm = Number(cum) - Number(cum) % 15;\n    return hs + (cm < 9 ? '0' + cm : cm);\n  });\n  return arr;\n}\n\nconst flatten = (arr, depth = 1) => arr.reduce((a, v) => a.concat(depth > 1 && Array.isArray(v) ? flatten(v, depth - 1) : v), []);\n\nconst groupBy = (arr, fn) => arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val, i) => {\n  acc[val] = (acc[val] || []).concat(arr[i]);\n  return acc;\n}, {});\n\nfunction Index({\n  center,\n  initLinekers\n}) {\n  const [info, setInfo] = useState({\n    labels: [],\n    data: []\n  });\n  useEffect(() => {\n    const getInfo = async () => {\n      var res = await _getTenData();\n      var data = fordata(res.data);\n      setInfo(data);\n    };\n\n    getInfo();\n  }, []);\n\n  const fordata = data => {\n    var labels = data.map(it => it.updateTime);\n    var waitTimes = flatten(data.map(it => it.waitTime), 3);\n    var dataObe = groupBy(waitTimes, 'hospName');\n    var data = [];\n\n    for (const key in dataObe) {\n      var obj = {};\n\n      if (Object.hasOwnProperty.call(dataObe, key)) {\n        const element = dataObe[key];\n        obj.label = key;\n        obj.data = element.map(it => it.topWait);\n        data.push(obj);\n      }\n    }\n\n    data = data.map(it => ({ ...it,\n      data: it.data.map(i => i.replace(/[^0-9]/ig, \"\"))\n    }));\n    return {\n      labels,\n      datas: data\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Lines, Object.assign({}, info, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/User/Desktop/express-full-4-26/express-full-4-26/fe/src/pages/Hours/index.jsx"],"names":["React","useEffect","useState","Lines","_getTenData","dayjs","gettimes","arr","index","hs","subtract","format","push","map","it","slice","cum","cm","Number","flatten","depth","reduce","a","v","concat","Array","isArray","groupBy","fn","val","acc","i","Index","center","initLinekers","info","setInfo","labels","data","getInfo","res","fordata","updateTime","waitTimes","waitTime","dataObe","key","obj","Object","hasOwnProperty","call","element","label","topWait","replace","datas"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport Lines from './../../component/Lines';\r\nimport { _getTenData } from \"../../util/req\";\r\nimport dayjs from \"dayjs\";\r\n\r\n\r\n\r\nfunction gettimes() {\r\n    var arr = []\r\n    for (let index = 0; index < 41; index++) {\r\n        var hs = dayjs().subtract(15 * index, 'minute').format(\"YYYYMMDD-HHmm\")\r\n        arr.push(hs)\r\n    }\r\n    arr = arr.map(it => {\r\n        var hs = it.slice(0, 11)\r\n        var cum = it.slice(11, 13)\r\n        var cm = Number(cum) - (Number(cum) % 15)\r\n        return hs + (cm < 9 ? '0' + cm : cm)\r\n    })\r\n    return arr\r\n}\r\n\r\n\r\nconst flatten = (arr, depth = 1) =>\r\n    arr.reduce((a, v) => a.concat(depth > 1 && Array.isArray(v) ? flatten(v, depth - 1) : v), []);\r\n\r\nconst groupBy = (arr, fn) =>\r\n    arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val, i) => {\r\n        acc[val] = (acc[val] || []).concat(arr[i]);\r\n        return acc;\r\n    }, {});\r\n\r\n\r\n\r\nfunction Index({ center, initLinekers }) {\r\n    const [info, setInfo] = useState({\r\n        labels: [],\r\n        data: [],\r\n    });\r\n    useEffect(() => {\r\n        const getInfo = async () => {\r\n            var res = await _getTenData()\r\n            var data = fordata(res.data)\r\n            setInfo(data)\r\n        };\r\n        getInfo();\r\n    }, []);\r\n\r\n\r\n    const fordata = (data) => {\r\n        var labels = data.map(it => it.updateTime)\r\n        var waitTimes = flatten(data.map(it => it.waitTime), 3)\r\n\r\n        var dataObe = groupBy(waitTimes, 'hospName')\r\n        var data = []\r\n        for (const key in dataObe) {\r\n            var obj = {}\r\n            if (Object.hasOwnProperty.call(dataObe, key)) {\r\n                const element = dataObe[key];\r\n                obj.label = key\r\n                obj.data = element.map(it => it.topWait)\r\n                data.push(obj)\r\n            }\r\n        }\r\n        data = data.map(it => ({ ...it, data: it.data.map(i => i.replace(/[^0-9]/ig, \"\")) }))\r\n        return {\r\n            labels,\r\n            datas: data,\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"info-center\">\r\n            <Lines {...info} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}