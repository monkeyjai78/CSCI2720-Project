{"ast":null,"code":"var _jsxFileName = \"/home/s1155127099/project/fe/src/component/AddModal/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update } from \"../../util/req\";\nimport Button from '../button';\nimport ModalWithTitle from '../ModalWithTitle';\nimport \"./style.css\";\nimport clsx from \"clsx\";\nexport default function AddModal(props) {\n  const gelist = async () => {\n    var res = await _getUserList();\n    setList(res.data);\n  };\n\n  const [list, setList] = useState([]);\n  const [info, setInfo] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const handleInfo = infoForm => {\n    setInfo({ ...infoForm\n    });\n  };\n\n  const save = async () => {\n    if (info.username.length >= 4 && info.password.length >= 4 && info.username.length <= 20 && info.password.length <= 20) {\n      if (info._id) {\n        var res1 = await _update(info);\n\n        if (res1.code === 500) {\n          alert(\"Username exist\");\n          return;\n        }\n      } else {\n        var res1 = await _reg(info);\n        console.log(res1.code);\n\n        if (res1.code === 500) {\n          alert(\"Username exist\");\n          return;\n        }\n      }\n\n      gelist();\n      alert(\"Updated/Added!\");\n      props.onClickClose();\n      setInfo({\n        username: \"\",\n        password: \"\"\n      });\n    } else {\n      alert(\"Username and password should between 4 and 20 characters\");\n    }\n  };\n\n  const update = async it => {\n    setInfo({ ...it\n    });\n  };\n\n  useEffect(() => {\n    handleInfo(infoForm);\n    gelist();\n  }, []);\n  const {\n    up = false,\n    infoForm,\n    className\n  } = props;\n  return /*#__PURE__*/React.createElement(ModalWithTitle, {\n    englishTitle: up ? \"Update User\" : \"Add New User\",\n    onClick: props.onClickClose,\n    backgroundColor: \"#1F6332\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, \"User Name:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"addmodal-input\",\n    type: \"text\",\n    value: info.username,\n    onChange: e => {\n      setInfo({ ...info,\n        username: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"addmodal-english-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, \"Password:\", \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"addmodal-input\",\n    type: \"text\",\n    value: info.password,\n    onChange: e => {\n      setInfo({ ...info,\n        password: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addmodal-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    chineseLabel: \"\\u78BA\\u8A8D\",\n    englishLabel: \"Confirm\",\n    onClick: save,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 6\n    }\n  }, info._id ? \"Save\" : \"Create\")))));\n}","map":{"version":3,"sources":["/home/s1155127099/project/fe/src/component/AddModal/index.js"],"names":["React","useEffect","useState","_getUserList","_delUser","_reg","_update","Button","ModalWithTitle","clsx","AddModal","props","gelist","res","setList","data","list","info","setInfo","username","password","handleInfo","infoForm","save","length","_id","res1","code","alert","console","log","onClickClose","update","it","up","className","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { _getUserList, _delUser, _reg, _update } from \"../../util/req\";\nimport Button from '../button'\nimport ModalWithTitle from '../ModalWithTitle'\nimport \"./style.css\"\nimport clsx from \"clsx\"\n\nexport default function AddModal(props)  {\n\tconst gelist = async () => {\n    var res = await _getUserList();\n    setList(res.data);\n\t};\n\tconst [list, setList] = useState([]);\n\tconst [info, setInfo] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n\n\tconst handleInfo = (infoForm) =>{\n\t\tsetInfo({...infoForm})\n\t}\n\tconst save = async () => {\n\t\tif(info.username.length>=4 && info.password.length>=4 && info.username.length<=20 && info.password.length<=20) {\n\t\n\t\t\tif (info._id) {\n\t\t\t\tvar res1 = await _update(info);\n\t\t\t\tif(res1.code===500){\n\t\t\t\t\talert(\"Username exist\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar res1 = await _reg(info);\n\t\t\t\tconsole.log(res1.code);\t\n\t\t\t\tif(res1.code===500){\n\t\t\t\t\talert(\"Username exist\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgelist();\n\t\t\talert(\"Updated/Added!\");\n\t\t\tprops.onClickClose();\n\t\t\tsetInfo({ username: \"\", password: \"\" });\n\t }else {\n\t\t alert(\"Username and password should between 4 and 20 characters\");\n\t}};\n\n\tconst update = async (it) => {\n    setInfo({ ...it });\n  };\n\n\tuseEffect(() => {\n\t\thandleInfo(infoForm);\n    gelist();\n  }, []);\n\n\tconst { up = false, infoForm ,className} = props;\n\n  return(\n    <ModalWithTitle englishTitle={up ? \"Update User\": \"Add New User\"} onClick={props.onClickClose} backgroundColor=\"#1F6332\">\n\t\t<div className=\"addmodal-container\">\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tUser Name:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-input-container\">\n\t\t\t\t<input className=\"addmodal-input\"\n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tvalue={info.username}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetInfo({ ...info, username: e.target.value }); \n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-title-container\">\n\t\t\t\t<span className=\"addmodal-english-title\">\n\t\t\t\t\tPassword:{\" \"}\n\t\t\t\t</span>\n\t\t\t</div>\n      <div className=\"addmodal-input-container\">\n\t\t\t\t<input className=\"addmodal-input\" \n\t\t\t\t\t\ttype=\"text\" \n            value={info.password}\n            onChange={(e) => {\n              setInfo({ ...info, password: e.target.value });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"addmodal-button-container\">\n\t\t\t\t<div className=\"addmodal-button\">\n\t\t\t\t\t<Button chineseLabel=\"確認\" englishLabel=\"Confirm\" onClick={save} >\n\t\t\t\t\t\t{info._id ? \"Save\" : \"Create\"}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n      </div>\n\t\t</div>\t\n  \t</ModalWithTitle>\n  )\n\n}\n"]},"metadata":{},"sourceType":"module"}